距离比赛结束前8小时，赛题一排21，赛题二排47

最后综合排名top15

题目：
任务1（60分）：根据提供的用户行为数据，选手需要分析用户行为特征与广告内容的匹配关系，准确预测用户对测试集广告的点击情况。每人每天限制提交3次。

任务2（40分）：根据提供的脱敏资讯新闻数据，选手需要对提供的训练集进行特征工程，构建资讯分类模型，对与测试集进行准确的新闻分类。每人每天限制提交3次。

任务3（20分，附加题）：设计一个产品营销智能体（AI Agent），该智能体需要根据产品信息、客户背景以及相关要求，生成一段具有应用价值的营销话术。



任务1:（在云端完成，数据集不可下载）
根据提供的用户行为数据，选手需要分析用户行为特征与广告内容的匹配关系，准确预测用户对测试集广告的点击情况。
数据集说明:

所有数据均已脱敏处理，包含以下四个子集：
1. 用户 - 广告点击记录（train_dataset.csv）
（1）数据格式：[user_id（用户ID）， ad_id（广告ID）， exposure_time（曝光时间），is_click（是否点击）]
（2）数据规模：约408万条记录（含正负样本）
（3）数据说明：每条记录代表某个用户在某个广告上的曝光是否有点击（1表示点击）。
2. 用户画像特征（user_features.csv）
（1）数据格式：[user_id（用户ID；string类型）， age（年龄；int类型）， gender（性别；string类型）， occupation（职业；string类型）， marriage（婚姻状态；string类型）， credit（是否信用卡用户；string类型）， region（地区；string类型）， device（设备；string类型）， register_day（注册天数；int类型）， activity_score（活跃度；int类型）， purchase_hisory（购买历史笔数；int类型）]
（2）数据规模：约10万个独立用户。
（3）数据说明：包含了所有用户特征。
3. 广告特征信息（ad_features.csv）
（1）数据格式：[ad_id（广告ID；string类型）， category（类别；string类型）， material_type（素材类型；string类型）， product_price（产品价格；float类型）， advertiser_score（广告主评分；int类型）， campaign_duration（投放时长；int类型）， historical_ctr（历史点击率；float类型）]
（2）数据规模：1000条独立广告。
（3）数据说明：包含了所有广告特征。
4. 测试集（test_dataset.csv）
（1）数据格式：[user_id（用户ID）， ad_id（广告ID）， exposure_time（曝光时间）]
（2）数据规模：约92万条样本。
（3）数据说明：每条记录代表某个用户在某个广告上的曝光，用来预测用户是否点击广告。



任务2:（在本地完成，数据集可以下载）
根据提供的脱敏资讯新闻数据，选手需要对提供的训练集进行特征工程，构建资讯分类模型，对与测试集进行准确的新闻分类。
数据集：

所有数据均已脱敏处理，包含以下两个子集：
1. 训练集（train_text.csv） train_text.csv
（1）数据格式：[新闻ID，新闻文本，标签]
（2）数据规模：约8000条记录（含多个标签）
（3）数据说明：新闻文本由社区新闻的标题+正文组合构成，文本通过自定义的分词器按照按照字符级别匿名化；标签也按照类别进行脱敏。
2. 测试集（test_text.csv）test_text.csv
（1）数据格式：[新闻ID，新闻文本]
（2）数据规模：约2000条记录。
提交要求:

数据格式：[新闻ID，标签]，csv文件
每天限制最多提交 3 次
文件名不允许出现中文、空格、括号等特殊字符
评分标准:

评分标准为每个类别 f1_score 的均值，选手提交的结果与实际测试集类别进行对比，结果越大排名越高。



任务3:（在本地完成）
设计一个产品营销智能体（AI Agent），该智能体需要根据产品信息、客户背景以及相关要求，生成一段具有应用价值的营销话术。
课题背景：
假设目前共有 8 款理财产品（含在售与预售），期望产品营销 Agent 能够接收不同客户的背景信息，识别适合客户购买的理财产品，同时生成可面客的产品营销话术。 其中涉及的背景知识如下：
（1）产品风险等级：理财产品的风险等级分为 1–5 级，代表产品本身的风险系数，数值越大，代表风险越高，出现低收益甚至亏损的概率越大。
（2）客户风险评级：客户背景知识中，包含了对应的客户风险承受能力评级，分为 1–5 级，向客户推荐的产品风险等级不可超过客户的风险评级。例如，客户风险评级为 3，则可购买风险等级为 1、2、3 的产品，不可购买风险等级为 4、5 的产品。
（3）预期收益率：根据产品在期运营情况，得出的预期收益率，不代表实际收益。
（4）如未特殊说明，产品可随时申请赎回，赎回到账日期为 T+2 个交易日，无违约金额要求，且剩余销售额度充足。
理财产品明细：
| 产品名称 | 风险等级 | 预期收益率（年化） | 状态 | 特殊说明        
| 招招1号 | 1       | 2.0%           | 在售 | 可当日赎回到账     
| 招招2号 | 2       | 2.5%           | 预售 | 2025年6月1日开售 
| 招招3号 | 2       | 2.8%           | 在售 | 大学生专享       
| 招招4号 | 3       | 3.0%           | 在售 | 产品额度紧张      
| 招招5号 | 3       | 3.2%           | 在售 | 产品需持有一年以上   
| 招招6号 | 4       | 3.5%           | 在售 | 实际收益已超3年未亏损 
| 招招7号 | 5       | 3.8%           | 在售 | 50万元起购      
| 招招8号 | 5       | 4.0%           | 在售 | 100万元起购     

客户背景信息样例：
客户一：
王路飞，男，25岁，风险评级：1级，在校大学生。因为仍在读书，手里的零钱不多，想买点风险的理财产品，提升收益。
分析：
客户风险评级为1级，只可推荐“招招1号”，并在营销话术中说明产品当日赎回到账的特点，体现学生所需要的资金灵活性，吸引客户购买。

客户二：
唐小舞，女，35岁，风险评级：5级，公司白领，目前可支配资金约40万元。
分析：
客户风险评级为5级，但当前可支配资金为40万元，不满足“招招7号”与“招招8号”的起购金额，考虑收益最大化，可优先推荐“招招6号”，可适当说明该产品往期的业绩优势。

客户三：
萧生，男，58岁，风险评级：3级，企业职工，子女目前仍在上学，需要留出较为充足的流动资金，为其子女汇入每月生活费。
分析：
客户风险评级为3级，可优先推荐“招招4号”或“招招5号”，但由于其每月有资金使用需求，所以可以向其推荐购买“招招4号”，并说明当前产品额度紧张的现状；更优的配置策略是，建议客户分散资金，分别购买“招招4号”和“招招5号”，在追求更大收益的同时，满足每月的资金使用需求。

话术要求：
（1）不可向客户推荐超出其风险承受能力的产品。
（2）“理财有风险，投资须谨慎”，不可向客户保证收益，不可“夸大”营销。
（3）需结合客户与产品信息，为其推荐适合的产品，并尽量使客户的收益最大化。
（4）营销话术应尽量简练，抓住核心要点，不要长篇大论。
（5）营销话术需自然、亲切，保证对客户的尊重和礼貌。
注：
题目中的场景、规则、客户信息与要求均为虚拟数据，不代表实际销售情况或要求。

数据集：

 本题目的最终评分的数据集在比赛期间不公开，比赛期间的运行的使用的是非正式数据集；
 比赛期间的提供运行功能，目的是让选手能自己确认提交的代码能正常运行，避免低级错误导致最终代码无效；
 比赛结束后，会更换数据集，并使用选手的最后一次提交的代码来运行，并评测最终的分数

提交要求：

每天限制最多提交 10 次, 文件名不允许出现中文、空格、括号等特殊字符

请使用python3完成编码，并提供run.py文件，入口方法为run(inf)，其中inf是字符串格式，传值是某一名客户的背景信息，例如：“王路飞，男，25岁，风险评级：1级，在校大学生。因为仍在读书，手里的零花钱不多，想买点低风险的理财产品，提升收益。”，程序输出是针对该名客户的一段营销话术的正文。

提交的代码允许内部做重试，多路并发调用大模型，达到容错且缩短运行耗时的功能；
提交的代码只允许赛题指定的api 和模型，否则判题过程代码会报错；
每个测试用例运行时间限定 30 秒，一个用例运行失败或超时，会自动重试 3 次
请注意代码不能有恶意退出，过量使用的内存的情况，请充分考虑异常捕获，超时等情况；
如果代码运行过程导致判题过程异常退出，所有用例的测试分数都会失效；

平台提供以开源项目 one-api 搭建的的大模型调用代理；
获取大模型代理的 secretKey：https://competition.nowcoder.com/oneapi-sk
可用模型ID：qwen2.5-3b-instruct，qwen2.5-7b-instruct，qwen2.5-7b-instruct-1m，glm-4-9b，gpt-4o-mini
one-api 遵循 openai-api 的调用参数规范；更多的参数规范可以查询相关文档；

代码参考模板：
import requests
import time


import requests
import json

url = 'https://one-api-other.nowcoder.com/v1/chat/completions'
# 设置请求头
headers = {
    'Authorization': '你的 appkey',  
    'Content-Type': 'application/json',
    'Accept': 'application/json'
}

def run(inf):
  data = {
    "model": "选择的模型",
    "messages": [
        {
            "role": "user",
            "content": "你好, "+inf
        }
    ]
  }
  response = requests.post(url, headers=headers, data=json.dumps(data))
  print(response.text)
  return response.json()['choices'][0]['message']['content']


if __name__ == "__main__":
  run("python")

评价标准：

比赛截止后，评分程序会调用选手上传的脚本，并依次传入其他不同的若干名客户背景信息，并对生成的话术进行质量评分。评分系统将综合考察Agent对于不同类型客户生成的话术质量，并得出该任务的最终评分。


**题目分析**
赛题1:
典型的特征工程任务，除了原始特征，还应该制作一些特征，时间列可以不断提取信息，还需要根据经济含义做一些交叉特征～
模型方面直接lightgbm，因为表格数据往往树模型效果更好，并且lgb占用内存和运算速度更快～赛题主办方提供的算力不支持神经网络（虽然40几个特征的lgb已经很满了🥹）
（我搞出来那个交叉特征太晚了，导致没咋调，要不然应该会更高🥹而且一次时间太长了有点懒了）

赛题2:
特征工程+选模型
这个8k条数据集量有点小，并且加密了（我们看不见实际文字），因此word2vec不太适合（训练不好+没办法微调），bert更别提了，合理做法应该是tf-idf～
因为tf-ldf处理的特征，具有稀疏特点，因此lgb这种其实不好（树模型对稀疏特征任务一直都不太行...），直接选线性svm简单粗暴还好用～为了提高效果加了个bagging～
（不可否认其他经验贴在这个任务中用了很多繁琐操作拿到了更好的成绩，但我想说我这个绝对是足够简单的方法并且成绩非常好的...这个题第二天就调出来了，短暂拿到过赛题第一嘻嘻）

赛题3:
很明显就是个玩gpt的工作，至于其他经验贴一顿操作...我只能说毫无必要
题目给了三个“客户信息+例子”，直接启发in context learning，再注意小模型要谨慎提供prompt，于是给了一些结构化的标志帮助gpt理解，效果非常好！
把题目要求先录给gpt-o3，让o3补齐那三个例子的输出，然后连同例子的输出一起当作prompt完成代码。
后续我用o3仿照例子写个50个新的样例，然后我调用了gpt4omini试了一下，效果非常好，50个全部正确并且话术质量很高（这个题属于是20min就可以做得超级好...真没必要一顿操作）


